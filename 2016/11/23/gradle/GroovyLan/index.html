<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Groovy语言," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="Groovy 语言学习个人Groovy目前学习所用主要是用于编写gradle插件。groovy语言是兼容Java语言的，我们可以使用写java的方式写Groovy，当然也可以使用Groovy本身的一些语法去写也许。Groovy是没有类型的java。来源Groovy入门教程
Groovy安装下载GDKGDK，配置安装环境，也就是环境变量，跟java的类型(AS直接运行貌似可以不用)，然后在Andro">
<meta property="og:type" content="article">
<meta property="og:title" content="Groovy语言学习基础">
<meta property="og:url" content="http://yoursite.com/2016/11/23/gradle/GroovyLan/index.html">
<meta property="og:site_name" content="黎伟杰">
<meta property="og:description" content="Groovy 语言学习个人Groovy目前学习所用主要是用于编写gradle插件。groovy语言是兼容Java语言的，我们可以使用写java的方式写Groovy，当然也可以使用Groovy本身的一些语法去写也许。Groovy是没有类型的java。来源Groovy入门教程
Groovy安装下载GDKGDK，配置安装环境，也就是环境变量，跟java的类型(AS直接运行貌似可以不用)，然后在Andro">
<meta property="og:updated_time" content="2016-11-22T16:28:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Groovy语言学习基础">
<meta name="twitter:description" content="Groovy 语言学习个人Groovy目前学习所用主要是用于编写gradle插件。groovy语言是兼容Java语言的，我们可以使用写java的方式写Groovy，当然也可以使用Groovy本身的一些语法去写也许。Groovy是没有类型的java。来源Groovy入门教程
Groovy安装下载GDKGDK，配置安装环境，也就是环境变量，跟java的类型(AS直接运行貌似可以不用)，然后在Andro">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/11/23/gradle/GroovyLan/"/>


  <title> Groovy语言学习基础 | 黎伟杰 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">黎伟杰</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">个人技术博客</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Groovy语言学习基础
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-23T00:28:10+08:00" content="2016-11-23">
              2016-11-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Groovy-语言学习"><a href="#Groovy-语言学习" class="headerlink" title="Groovy 语言学习"></a>Groovy 语言学习</h1><p>个人Groovy目前学习所用主要是用于编写gradle插件。<br>groovy语言是兼容Java语言的，我们可以使用写java的方式写Groovy，当然也可以使用Groovy本身的一些语法去写也许。Groovy是没有类型的java。<br>来源<a href="http://blog.csdn.net/kmyhy/article/details/4200563" target="_blank" rel="external">Groovy入门教程</a></p>
<h2 id="Groovy安装"><a href="#Groovy安装" class="headerlink" title="Groovy安装"></a>Groovy安装</h2><p>下载GDK<a href="http://www.groovy-lang.org/download.html" target="_blank" rel="external">GDK</a>，配置安装环境，也就是环境变量，跟java的类型(AS直接运行貌似可以不用)，然后在Android Studio中开发Groovy，第一次运行的时候需要配置lib的路径，根据提示选择到groovy的安装目录下面的lib目录设置进去。这样子就可以了。</p>
<h2 id="Groovy基本规则"><a href="#Groovy基本规则" class="headerlink" title="Groovy基本规则"></a>Groovy基本规则</h2><ul>
<li>作为动态语言，Groovy中所有的变量都是对象，在声明一个变量时，不强制声明类型，只是需要在变量前使用def关键字。</li>
<li>属性默认都是private的，默认提供get和set方法，类默认都是public的。</li>
<li>语句结束的时候不需要”;”表示语句结束</li>
<li>文件名以.groovy结尾</li>
<li><p>注释，他的注释与java一样，支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">只能在第一行的注释：#!</div><div class="line">单行注释：//</div><div class="line">多行注释：/**/</div><div class="line">文档注释，也就是编译到doc里面的：/** */</div></pre></td></tr></table></figure>
</li>
<li><p>变量命名<br>以字母，美元符号$，或者是下划线_开始，不能以字符串开始</p>
</li>
<li>Groovy的保留字</li>
</ul>
<p>as<br>assert<br>break<br>case<br>catch<br>class<br>const<br>continue<br>def<br>default<br>do<br>else<br>enum<br>extends<br>false<br>finally<br>for<br>goto<br>if<br>implements<br>import<br>in<br>instanceof<br>interface<br>new<br>null<br>package<br>return<br>super<br>switch<br>this<br>throw<br>throws<br>trait<br>true<br>try</p>
<ul>
<li>Groovy的自动导入的包包括：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">groovy.lang.*</div><div class="line">groovy.util.*</div><div class="line">java.lang.*</div><div class="line">java.util.*</div><div class="line">java.net.*</div><div class="line">java.io.*</div><div class="line">java.math.BigInteger</div><div class="line">java.math.BigDecimal</div></pre></td></tr></table></figure>
</li>
</ul>
<p>使用到这些包的时候我们就不用去import了</p>
<h2 id="Groovy语法基础"><a href="#Groovy语法基础" class="headerlink" title="Groovy语法基础"></a>Groovy语法基础</h2><h3 id="HelloGroovy程序："><a href="#HelloGroovy程序：" class="headerlink" title="HelloGroovy程序："></a>HelloGroovy程序：</h3><p>我们首先在AS里面新建一个JAVA 程序或者是建立一个Android lib或者是app module，随便都行。然后新建一个名字随便的.groovy文件。比如mygroovy.groovy文件，文件的位置是位于src/main/java目录下面。<br>然后按照JAVA的写法输出HelloGroovy是：在mygroovy.groovy新建一个类，类的名字是随便，例子如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">public class HelloGroovy&#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        System.out.println(&quot;Hello Groovy&quot;)</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后对着代码右键，选择run，然后假如是第一次需要配置Groovy的jar进来。就选择你下载的Groov目录下面的lib目录配置进去，再次运行，就可以输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hello Groovy</div></pre></td></tr></table></figure></p>
<p>这里的输出还是调用java的输出流实现的。<br>其他写法：<br>不需要类，不需要main方法，直接是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">System.out.println(&quot;Hello Groovy&quot;)</div></pre></td></tr></table></figure></p>
<p>右键，run，还是输出Hello Groovy。这里的输出还是使用JAVA语言的输出流实现的。<br>最简单的写法，直接：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">print(&quot;Hello Groovy&quot;)</div><div class="line">print &quot;Hello Groovy&quot;</div></pre></td></tr></table></figure></p>
<p>同样会都输出Hello Groovy，这里就是使用Groovy语言实现的。</p>
<h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><p>我们可以使用java的强语言类型，使用各种不同的类型去定义变量，在这里不分享。Groovy还可以通过关键字<strong>def</strong>定义变量，他会根据上下文去推断这个变量的类型，需要强调一点，Groovy里面def声明一切都是对象。比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">def a=10</div><div class="line">def b=10L</div><div class="line">def c=&quot;Hello Groovy&quot;</div><div class="line">def d=1.0</div><div class="line">def e=1.0f</div><div class="line">println(a.class)</div><div class="line">println(b.class)</div><div class="line">println(c.class)</div><div class="line">println(d.class)</div><div class="line">println(e.class)</div></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class java.lang.Integer</div><div class="line">class java.lang.Long</div><div class="line">class java.lang.String</div><div class="line">class java.math.BigDecimal</div><div class="line">class java.lang.Float</div></pre></td></tr></table></figure></p>
<p>同时，在给一个变量赋值之后，也就是给定了类型之后，该变量还是可以指向别的类型的，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">def a=10;</div><div class="line">println(a.class)</div><div class="line">a = &quot;Hello Groovy&quot;</div><div class="line">println(a.class)</div></pre></td></tr></table></figure></p>
<p>输出就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a=10;</div><div class="line">println(a.class)</div><div class="line">a = &quot;Hello Groovy&quot;</div><div class="line">println(a.class)</div></pre></td></tr></table></figure></p>
<p>但是，你以为就一定是需要def关键字吗，个人在AS里面测试运行的时候发现，我们可以把关键字def都省略掉，直接使用一个变量名字就可以，这就是动态语言的强大。变量堆指向的类型不关心，只要你给他什么类型，他就可以是什么类型。上面的例子是可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">a=10;</div><div class="line">println(a.class)</div><div class="line">a = &quot;Hello Groovy&quot;</div><div class="line">println(a.class)</div></pre></td></tr></table></figure></p>
<p>这样子也是ok的。</p>
<h3 id="类型兼容问题"><a href="#类型兼容问题" class="headerlink" title="类型兼容问题"></a>类型兼容问题</h3><p>看下面一个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line"> </div><div class="line">char c = &apos;a&apos;</div><div class="line">println c.class</div><div class="line">c=&apos;b&apos;</div><div class="line">println c.class</div><div class="line">c2=&apos;a&apos;</div><div class="line">c3=&quot;a&quot;</div><div class="line">println c2.class</div><div class="line">println c3.class</div></pre></td></tr></table></figure></p>
<p>首先我们使用java的char关键字声明一个char 类型的变量c，然后打印类型，再次改变内容，再次打印类型，然后声明c2和c3，打印类型：输出结果是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class java.lang.Character</div><div class="line">class java.lang.Character</div><div class="line">class java.lang.String</div><div class="line">class java.lang.String</div></pre></td></tr></table></figure></p>
<p>可以看到，只要是使用java声明了类型，而后在后面改变了c的值，他的类型是没有改变的，但是直接声明c2和c3，无论使用’’还是””，类型都是String。所以我们得知，在Groovy直接声明变量中是只能变为String，而不能变为Character。除非你是强制类型装换或者是使用as char，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line"> </div><div class="line">c = (char) &quot;c&quot;</div><div class="line">c2 = &quot;c&quot; as char</div></pre></td></tr></table></figure></p>
<p>这样子就可以装换为Character。<br>那么假如我们使c指向一个字符串会怎么样子呢？答案是会报错，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line"> </div><div class="line">char c = &apos;a&apos;</div><div class="line">println(c.class)</div><div class="line">c=&quot;aa&quot;</div><div class="line">println(c.class)</div></pre></td></tr></table></figure></p>
<p>就会报<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Caught: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object &apos;aa&apos; with class &apos;java.lang.String&apos; to class &apos;char&apos;</div></pre></td></tr></table></figure></p>
<p>但是假如你是把c指向int，float，double，只要是没有超出char的范围，或者是只有一个字符的字符串，比如“A”，而且他是可以使用Character.valueOf()方法转化的，那么它也会被赋值成功。<br>也就是说，使用java声明的变量，他会保持类型而不能够动态指向不同类型，假如是指向了其他类型，对于基本类型而言，能够使用Type.valueOf()方法转化的就不会出错。</p>
<p>as 保留字<br>他的函数是a.asType(b)，用于指定类型，因为在Groovy中，是没有类型的</p>
<h3 id="Groovy的字符串GString"><a href="#Groovy的字符串GString" class="headerlink" title="Groovy的字符串GString"></a>Groovy的字符串GString</h3><ul>
<li>插值占位符$<br>首先我们先看一个例子，理解使用单引号’’和使用双引号””的字符串的区别：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line"> </div><div class="line">str = &quot;hello&quot;</div><div class="line">str1 = &apos;hi$&#123;str&#125;&apos;</div><div class="line">str2 = &quot;hi$&#123;str&#125;&quot;</div><div class="line">str3 = &quot;$&#123;str&#125;hi&quot;</div><div class="line">println(str1)</div><div class="line">println(str2)</div><div class="line">println(str3)</div><div class="line">a = 1;</div><div class="line">b = 2;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hi$str</div><div class="line">hihello</div><div class="line">hellohi</div><div class="line">sum = 3</div><div class="line">sum2 = 3</div></pre></td></tr></table></figure></p>
<p>可以看到使用单引号插值占位符不起效。<br>使用插值占位符我们可以替换或者是填补空缺。使用的方式就是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$&#123;var&#125;</div></pre></td></tr></table></figure></p>
<p>当$位于语句末端的时候，{}可以省略，其他的一般不要省略，比如上面的str的就可以省略，但是str3的省略就会出错。我们可以用它来插入变量。有点类似JAVA的String的Format。<br>同时，占位符支持符号内的运算，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sum=&quot;sum = $&#123;a + b&#125;&quot;</div><div class="line">sum2 =&quot;sum2 = $&#123;1 + 2&#125;&quot;</div><div class="line">println(sum)</div><div class="line">println(sum2)</div></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sum = 3</div><div class="line">sum2 = 3</div></pre></td></tr></table></figure></p>
<p>占位符中调用方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">a = 1;</div><div class="line">sum=&quot;sum = $&#123;a.hashCode()+getInt() &#125;&quot;</div><div class="line">sum2 =&quot;sum2 = $&#123;getInt()&#125;&quot;</div><div class="line">println(sum)</div><div class="line">println(sum2)</div><div class="line">private int getInt() &#123;</div><div class="line">    return 3;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>三重引用字符使用</li>
</ul>
<ol>
<li>三个单引号开始三个单引号结束，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line">str=&apos;&apos;&apos;hello Groovy&apos;&apos;&apos;</div><div class="line">println(str)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>就可以输出hello Groovy。三重引用字符不支持插值占位符的操作，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">str = &quot;Groovy&quot;</div><div class="line">str1=&apos;&apos;&apos;hello$&#123;str&#125;&apos;&apos;&apos;</div></pre></td></tr></table></figure></p>
<p>str1的结果是hello${str}，不会是hello Groovy。<br>三重引用字符支持多行字符串，不像简单的用单引号或者是双引号字符串，他们是不支持多行字符串的，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">str1=&apos;&apos;&apos;hello</div><div class="line">    Groovy&apos;&apos;&apos;</div><div class="line">println(str1)</div><div class="line">println(str1.contains(&quot;\n&quot;))</div></pre></td></tr></table></figure></p>
<p>打印输出的就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hello</div><div class="line">    Groovy</div><div class="line">true</div></pre></td></tr></table></figure></p>
<p>换行符会被替换成”\n”。其他的留白会照常输出。使用”\”表示不转义，它本身是支持转义的，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">str1=&apos;&apos;&apos;\</div><div class="line">Hello\tGroovy&apos;&apos;&apos;</div><div class="line">println(str1)</div><div class="line">println(str1.startsWith(&quot;\n&quot;))</div></pre></td></tr></table></figure></p>
<p>输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello    Groovy</div><div class="line">false</div></pre></td></tr></table></figure></p>
<p>可以看到换行符没有使用转义，也就没有输出一个换行了。使用\t就是一个tab键距离。</p>
<ol>
<li>三个双引号开始三个双引号结束，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">c = &quot;hello&quot;</div><div class="line">str=&quot;\</div><div class="line">\n $&#123;c&#125;+\tGroovy&quot;</div><div class="line">println(str)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">hello+    Groovy</div></pre></td></tr></table></figure></p>
<p>可以看到他跟单引号的区别是可以使用占位符。其他的类似。</p>
<ul>
<li>斜线字符串<br>使用/ string/表示，他经常用于正则匹配，跟””字符串类型，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">s=&quot;Groovy&quot;</div><div class="line">str=/Hello $&#123;s&#125;/ as String</div><div class="line">str1 = &quot;Hello Groovy&quot; as String</div><div class="line">println(str.equals(str1))</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出就是true。同样支持多行和占位符。</p>
<h3 id="Groovy的运算符"><a href="#Groovy的运算符" class="headerlink" title="Groovy的运算符"></a>Groovy的运算符</h3><p>Groovy支持Java所有的运算符，但是它本身还支持另外一些运算符</p>
<ul>
<li>安全占位符<br>他的作用是避免空指针，使用?，例如<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String str;</div><div class="line">str2 =str?.hashCode()</div><div class="line">println(str2)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>这里是照常输出不会出现空指针，使用?的意思就是它不为空的时候调用对应的属性的方法。使用“.”调用方法或者改属性对应的属性。</p>
<ul>
<li>次方运算<br>使用”num**num”表示，就是求某一个数的多少次方，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2**3</div></pre></td></tr></table></figure>
</li>
</ul>
<p>结果就是8，就是2的三次方的意思</p>
<ul>
<li>简化的三目运算符，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">str = &quot;Hello Groovy&quot; as Strin</div><div class="line">//常规写法</div><div class="line">str2 = str == null ? &quot;Hello Java&quot; : str</div><div class="line">//Groovy写法</div><div class="line">str3 = str?str:&quot;Hello Java&quot;</div><div class="line">// 简化写法</div><div class="line">str4=str?:&quot;Hello Java&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>其中第一种写法是比较明了的，第二种写法的意思是：当str不为空的时候，调用前者，为空的时候，调用后者，第三种写法的意思是，当str不为空的时候，使用自己，为空的时候使用后者。</p>
<p>还有一部分的运算符，可以参考<a href="http://groovy-lang.org/operators.html" target="_blank" rel="external">Operators</a></p>
<h3 id="Groovy-导入别的类"><a href="#Groovy-导入别的类" class="headerlink" title="Groovy 导入别的类"></a>Groovy 导入别的类</h3><p>语法是跟java一样，使用import关键字，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import groovy.xml.MarkupBuilder</div><div class="line">import static Boolean.FALSE // 静态导入，可以直接使用它的一些静态变量和方法而不用使用类.方法调用。</div><div class="line">import static java.lang.Boolean.FALSE as f// 取别名，可以想下面那样子去使用FALSE。</div><div class="line">f a = false</div></pre></td></tr></table></figure></p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><h4 id="switch-case结构"><a href="#switch-case结构" class="headerlink" title="switch/case结构"></a>switch/case结构</h4><p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">def x =1.2</div><div class="line">def result = &quot;&quot;</div><div class="line">switch ( x ) &#123;</div><div class="line">    case &quot;foo&quot;:</div><div class="line">        result = &quot;found foo&quot;</div><div class="line">// lets fall through</div><div class="line">    case &quot;bar&quot;:</div><div class="line">        result += &quot;bar&quot;</div><div class="line">        break</div><div class="line">    case [4, 5, 6, &apos;inList&apos;]:</div><div class="line">        result = &quot;list&quot;</div><div class="line">        break</div><div class="line">    case 12..30:</div><div class="line">        result = &quot;range&quot;</div><div class="line">        break</div><div class="line">    case Integer:</div><div class="line">        result = &quot;integer&quot;</div><div class="line">        break</div><div class="line">    case Number.class:</div><div class="line">        result = &quot;number&quot;</div><div class="line">        break</div><div class="line">    case ~/fo*/: // toString() representation of x matches the pattern?</div><div class="line">        result = &quot;foo regex&quot;</div><div class="line">        break</div><div class="line">    case &#123; it &lt; 0 &#125;: // or &#123; x &lt; 0 &#125;</div><div class="line">        result = &quot;negative&quot;</div><div class="line">        break</div><div class="line">    default:</div><div class="line">        result = &quot;default&quot;</div><div class="line">&#125;</div><div class="line">println(result</div></pre></td></tr></table></figure></p>
<p>可以看到，在switch case结构体中，他是支持很多种类型的匹配的，可以是正则匹配，可以是类匹配，可以是字符串，数字匹配，也可以是表达式的匹配，按照从上到下的方式进行匹配，这里的输出是Number。</p>
<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p>支持经典的for循环，例子这里也就不写了。还有别的循环。</p>
<ul>
<li>范围循环，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int sum;</div><div class="line">for (i in 1..9) &#123;</div><div class="line">    sum+=i</div><div class="line">&#125;</div><div class="line">println(sum)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>注意的是这里的i是没有指定类型的，直接是i in num，就是i在某个范围内循环，输出的是45.<br>in关键字还可以用于执行变量i为数组，list，map等类型进行循环，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">arr = [1,2,3,4] as int[]</div><div class="line">sum = 0 as int</div><div class="line">for (i in arr) &#123;</div><div class="line">    sum+=i;</div><div class="line">&#125;</div><div class="line">println(sum)</div></pre></td></tr></table></figure></p>
<p>就是输出10</p>
<ul>
<li>使用闭包循环，闭包的概念在下面，其实我们可以使用一个闭包来实现循环<br>在Integer类，Groovy提供了一些方便循环的闭包，比如upto,times,step，例如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//从2到5循环，包括3</div><div class="line">2.upto(5, &#123; print(it) &#125;)</div><div class="line">println()</div><div class="line">//从0开始循环2次，每次加1</div><div class="line">2.times &#123; print(it) &#125;</div><div class="line">println()</div><div class="line">//从2开始，每次加2，输出小于10的值</div><div class="line">2.step(10, 2, &#123;print(it)&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2345</div><div class="line">01</div><div class="line">2468</div></pre></td></tr></table></figure></p>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">list = [1, &quot;2&quot;, false];</div><div class="line">println(list.getClass())</div><div class="line">list.add(3)</div><div class="line">list.add(0, &quot;4&quot;)</div><div class="line">list.addAll([5, 6, 7,1])</div><div class="line">println(list)</div><div class="line">list.remove(false)</div><div class="line">println(list)</div><div class="line">println(list.indexOf(1))</div></pre></td></tr></table></figure>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class java.util.ArrayList</div><div class="line">[4, 1, 2, false, 3, 5, 6, 7, 1]</div><div class="line">[4, 1, 2, 3, 5, 6, 7, 1]</div><div class="line">1</div></pre></td></tr></table></figure></p>
<p>支持增删查改，默认的类型是ArrayList，在初始化的时候可以进行赋值。可以通过as操作符强转。比如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">list = [&quot;A&quot; ,&quot;B&quot;,&quot;C&quot;] as LinkedList&lt;String&gt;</div></pre></td></tr></table></figure></p>
<p>Groovy还支持多维的List，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">list = [[1, 2], [3, 4]];</div><div class="line">sum = 0</div><div class="line">for (i in list) &#123;</div><div class="line">    for (j in i) &#123;</div><div class="line">       sum+=j</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">println(sum)</div></pre></td></tr></table></figure></p>
<p>就会输出10，有点类型多维数组。</p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">map = [A: 1, B: 2, C: 3] as Map&lt;String,Integer&gt;</div><div class="line">for (i in map) &#123;</div><div class="line">    println(&quot;Key=&quot;+i.getKey()+&quot;,value=&quot;+i.getValue())</div><div class="line">&#125;</div><div class="line">map.put(&quot;D&quot;, 4)</div><div class="line">map.remove(&quot;A&quot;)</div><div class="line">println(map)</div><div class="line">i = map.get(&quot;C&quot;)</div><div class="line">println(i)</div></pre></td></tr></table></figure>
<p>输出是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Key=A,value=1</div><div class="line">Key=B,value=2</div><div class="line">Key=C,value=3</div><div class="line">[B:2, C:3, D:4]</div><div class="line">3</div></pre></td></tr></table></figure></p>
<p>map同样支持初始化的时候进行赋值，他的赋值是，[key:value…]，支持Java的map的所以操作。当我们没有为map指定类型的时候，他会根据上下文去推断map 的类型。</p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组的定义跟JAVA的类似，比如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">arr = [1, 2, 3, 4, 5] as int[]</div><div class="line">String[]  arr2 = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]</div><div class="line">sum = 0;</div><div class="line">for (i in arr) &#123;</div><div class="line">    sum+=i;</div><div class="line">&#125;</div><div class="line">String str=&quot;&quot;;</div><div class="line">for (i in arr2) &#123;</div><div class="line">    str+=i</div><div class="line">&#125;</div><div class="line">println(sum)</div><div class="line">println(str)</div></pre></td></tr></table></figure></p>
<p>输出了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">15</div><div class="line">[A, B, C]</div></pre></td></tr></table></figure></p>
<p>这里需要注意的是定义数组的时候不要跟定义List混淆，arr = [1, 2, 3, 4, 5]是定义为一个List。arr[]=[1,2,3,4,5]是一种错误的定义方法。</p>
<h2 id="Groovy封装定义"><a href="#Groovy封装定义" class="headerlink" title="Groovy封装定义"></a>Groovy封装定义</h2><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><p>首先基本的类型有：<br>integral 整形，byte 8字节， short 16字节， int 32字节，long 64字节<br>浮点类型：float 32字节，double 64字节<br>布尔类型 boolean 只有true或者false<br>char 类型，16字节，可以作为一个numeric，代表UTF-16字符集。<br>他们都有对应的包装类，就是JAVA对应的那些包装类。</p>
<ul>
<li>定义类的时候：</li>
</ul>
<ol>
<li>该类是自动默认是public的，为属性默认提供get和set方法</li>
<li>他们的属性和方法没有访问修饰符修饰的时候是public的。</li>
<li>一个Groovy文件可以包含多个类。<br>例子：我们在bean包下定义一个person类如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">package com.example.bean</div><div class="line">class Person&#123;</div><div class="line">    String name;</div><div class="line">    Integer age;</div><div class="line"> </div><div class="line">    @Override</div><div class="line">    String toString() &#123;</div><div class="line">        return &quot;Name=$&#123;name&#125;,age=$&#123;age&#125;&quot;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>然后在上一级的包中去测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">package com.example</div><div class="line"> </div><div class="line">import com.example.bean.Person</div><div class="line">def person = new Person()</div><div class="line">person.age = 30;</div><div class="line">person.name=&quot;Hello&quot;</div><div class="line">println(person)</div></pre></td></tr></table></figure></p>
<p>发现正常打印结果。同时我们可以通过他默认提供的get/set方法设置属性值。但是有一点我们需要注意，假如有时候我们自己定义了get和set方法，这里面的get和set方法跟默认生成的不一样。假如是直接调用get好set的时候就会调用我们自己生成的，但是假如我们需要调用系统生成的时候，就可以使用域访问符”.@”了，例子如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// Person的getName()方法</div><div class="line">   public String getName() &#123;</div><div class="line">        return &quot;java&quot;</div><div class="line">    &#125;</div><div class="line">//使用比较</div><div class="line">Person p1 = new Person(name: &quot;Groovy&quot;, age: 30)</div><div class="line">println(p1.getName())</div><div class="line">println(p1.@name)</div></pre></td></tr></table></figure></p>
<p>这样子就可以使用系统为我们生成的get/set方法了。<br>关于内部类，抽象类，接口，接口继承，这些是跟JAVA一样的。这里不再写例子了。</p>
<ul>
<li>构造方法：<br>我们为Person类添加一个构造方法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public Person(name, age) &#123;</div><div class="line">        this.name = name;</div><div class="line">        this.age = age;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>然后在使用它，可以跟JAVA一样子使用，也可以是下面那样子使用，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// java使用</div><div class="line">person = new Person(&quot;Hello&quot;,12)</div><div class="line">println(person)</div><div class="line"> //Groovy多出的方式</div><div class="line">Person p = [&quot;Groovy&quot;,20]</div><div class="line">println(p)</div></pre></td></tr></table></figure></p>
<p>参数列表需要跟构造参数的参数列表相对应。<br>还有另外一种更加随性的方式，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Person p1 = new Person(name: &quot;java&quot;, age: 30)</div><div class="line">Person p2 = new Person(age: 40,name:&quot;PHP&quot;)</div><div class="line">Person p3 = new Person(name: &quot;hei&quot;)</div><div class="line">Person p4 = new Person(age:10)</div></pre></td></tr></table></figure></p>
<p>使用这种构造器的时候，我们的类需要没有构造器或者是构造器是空构造器的时候就可以使用。所以，我们一般使用Groovy的时候，假如没有特殊的要求，尽量可以不提供有参数的构造器，以为Groovy会提供足够的构造器给我们使用。</p>
<h3 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h3><p>例子如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def someMethod() &#123; &apos;method called&apos; &#125;                          </div><div class="line">String anotherMethod() &#123; &apos;another method called&apos; &#125;            </div><div class="line">def thirdMethod(param1) &#123; &quot;$param1 passed&quot; &#125;                  </div><div class="line">static String fourthMethod(String param1) &#123; &quot;$param1 passed&quot; &#125;</div></pre></td></tr></table></figure></p>
<p>1.不用声明返回类型，而，输入参数可以不指定类型。这是Groovy比较特别的。例如我们在上面的Person类添加一下方法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def getJob() &#123;</div><div class="line">        return &quot;Groovy devr&quot;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    def setJob(job) &#123;</div><div class="line">       return &quot;Good $&#123;job&#125;&quot;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>由于没有设置限定修饰符，所以都是public的。<br>调用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import com.example.bean.Person</div><div class="line">Person p1 = new Person(name: &quot;java&quot;, age: 30)</div><div class="line">println(p1.getJob())</div><div class="line">println(p1.setJob(&quot;HeiHeiHei&quot;))</div></pre></td></tr></table></figure></p>
<p>这样子就可以输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Groovy devr</div><div class="line">Good HeiHeiHei</div></pre></td></tr></table></figure></p>
<h3 id="定义属性"><a href="#定义属性" class="headerlink" title="定义属性"></a>定义属性</h3><p>一般定义属性跟java类型，可以有修饰符，没有修饰符则是public的。</p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>终于学习到我们的重点了，闭包。</p>
<ul>
<li>首先，我们看看闭包是怎么样子的，我们定义一个接口，如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">package com.example.closure</div><div class="line">public interface MyClosure&#123;</div><div class="line">    void accept(String A)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>然后使用它：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MyClosure p =  &#123; println(it.contains (&apos;G&apos;) )&#125;</div><div class="line">p.accept(&quot;Groovy&quot;)</div></pre></td></tr></table></figure></p>
<p>结果会输出true。这就是一个闭包。闭包的定义；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; [closureParameters -&gt; ] statements &#125;</div></pre></td></tr></table></figure></p>
<p>说明：</p>
<ol>
<li>[closureParameters -&gt; ]这部分是可以省略的。statements 可以是0或者是多个语句。</li>
<li>闭包参数类似于方法参数</li>
<li>当指定参数之后-&gt;是必须的。作用是用来分开闭包参数和语句，语句的个数可以有0个或者多个。</li>
<li>当语句有多条的时候，可以使用{}包裹起来。<br>例子：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 简单的闭包</div><div class="line">&#123; item++ &#125;                                         </div><div class="line"> // 使用-&gt;分离参数和语句</div><div class="line">&#123; -&gt; item++ &#125;                                      </div><div class="line"> //闭包使用隐式参数</div><div class="line">&#123; println it &#125;                                     </div><div class="line"> // 闭包使用显示参数</div><div class="line">&#123; it -&gt; println it &#125;                               </div><div class="line"> // 这种情况最好指定参数</div><div class="line">&#123; name -&gt; println name &#125;                           </div><div class="line"> //接收两个参数，并且答应对应的值</div><div class="line">&#123; String x, int y -&gt;                               </div><div class="line">    println &quot;hey $&#123;x&#125; the value is $&#123;y&#125;&quot;</div><div class="line">&#125;</div><div class="line"> //闭包可以包含多个语句，同时可以使用&#123;&#125;包裹起来，也可以不用。</div><div class="line">&#123; reader -&gt;                                        </div><div class="line">    def line = reader.readLine()</div><div class="line">    line.trim()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>以上例子是来自Groovy官网的例子。</p>
<ul>
<li>闭包作为对象<br>他的类型是Closure，例子如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def listener = &#123; e -&gt; println &quot;Clicked on $e.source&quot; &#125;     </div><div class="line">println listener instanceof Closure</div><div class="line">Closure callback = &#123; println &apos;Done!&apos; &#125;                     </div><div class="line">Closure&lt;Boolean&gt; isTextFile = &#123;</div><div class="line">    File it -&gt; it.name.endsWith(&apos;.txt&apos;)                    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出的是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">true</div></pre></td></tr></table></figure></p>
<ol>
<li>我们可以把Closure作为一个变量，他指向的实例是一个Closure的子类或本身</li>
<li>当我们没有使用def关键字命名一个闭包的时候，可以指定他的类型是Closure</li>
<li>我们可以为Closure引用设置为泛型</li>
</ol>
<ul>
<li>调用闭包<br>调用闭包有两种方式：</li>
</ul>
<ol>
<li>调用闭包对象，比如上面直接是callback()</li>
<li>调用闭包的call()方法。</li>
<li>没有指定返回的时候，最后一条语句执行之后的值就是返回类型以及返回值。<br>例子如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def code= &#123; 123 &#125;</div><div class="line">println(code() == 123)</div><div class="line">println(code.call()==123)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>这里定义了一个闭包code，直接调用code()或者是直接调用code.call()方法。当闭包有参数的时候，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def code=&#123;s-&gt;&quot;Hello $&#123;s&#125;&quot;&#125;</div><div class="line">println(code(&quot;Groovy&quot;))</div><div class="line">println(code.call(&quot;Java&quot;))</div></pre></td></tr></table></figure></p>
<p>我们会在闭包调用或者call调用中传入参数，这样子就可以了。</p>
<ul>
<li>闭包参数</li>
</ul>
<ol>
<li>闭包参数是类型可选的，也就可以不声明类型</li>
<li>需要一个名称</li>
<li>可以有一个默认值<br>例子如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 只有一个参数，没有指定类型，返回值是String</div><div class="line">def closureWithOneArg = &#123; str -&gt; str.toUpperCase() &#125;</div><div class="line">assert closureWithOneArg(&apos;groovy&apos;) == &apos;GROOVY&apos;</div><div class="line">//指定类型，只有一个参数，返回值是String</div><div class="line">def closureWithOneArgAndExplicitType = &#123; String str -&gt; str.toUpperCase() &#125;</div><div class="line">assert closureWithOneArgAndExplicitType(&apos;groovy&apos;) == &apos;GROOVY&apos;</div><div class="line"> //多个参数，返回值是int或者是String或者是其他可以执行+运算符的对象</div><div class="line">def closureWithTwoArgs = &#123; a,b -&gt; a+b &#125;</div><div class="line">assert closureWithTwoArgs(1,2) == 3</div><div class="line"> //指定类型，返回值是int</div><div class="line">def closureWithTwoArgsAndExplicitTypes = &#123; int a, int b -&gt; a+b &#125;</div><div class="line">assert closureWithTwoArgsAndExplicitTypes(1,2) == 3</div><div class="line"> //指定其中一个类型，a的类型需要能够与b进行+运算符操作</div><div class="line">def closureWithTwoArgsAndOptionalTypes = &#123; a, int b -&gt; a+b &#125;</div><div class="line">assert closureWithTwoArgsAndOptionalTypes(1,2) == 3</div><div class="line"> //指定一个默认值b为2</div><div class="line">def closureWithTwoArgAndDefaultValue = &#123; int a, int b=2 -&gt; a+b &#125;</div><div class="line">assert closureWithTwoArgAndDefaultValue(1) == 3</div></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>隐式参数<br>当我们没有显示的定义一个参数列表，也没有使用-&gt;，闭包中是会包含一个名字为it的变量。假如希望我们的闭包不需要任何的参数，则使用一个空参数加上-&gt;例子如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// 默认有一个参数</div><div class="line">def code=&#123;&quot;Hello $&#123;it&#125;&quot;&#125;</div><div class="line">println(code.call(&quot;Groovy&quot;))</div><div class="line">//跟上面的作用一样</div><div class="line">code=&#123;it-&gt;&quot;Hello $&#123;it&#125;&quot;&#125;</div><div class="line">println(code.call(&quot;PHP&quot;))</div><div class="line">//没有任何的参数</div><div class="line">code= &#123; -&gt; &quot;Hello Java&quot; &#125;</div><div class="line">println(code.call())</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Hello Groovy</div><div class="line">Hello PHP</div><div class="line">Hello Java</div></pre></td></tr></table></figure></p>
<ul>
<li>可变参数<br>Groovy允许我们在最后一个闭包参数使用可变参数，例如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def code=&#123;a,String... arg-&gt;</div><div class="line">    println(a)</div><div class="line">    println(arg[0])</div><div class="line">    println(arg[1])</div><div class="line">&#125;</div><div class="line">code.call(1, &quot;A&quot;, &quot;B&quot;)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>就会输出1，A，B</p>
<ul>
<li>闭包作为方法参数<br>当一个闭包引用作为另外一个闭包或者是方法的最后一个参数的时候，我们可以安装常规写法，也可以将闭包提取出{}之外写，例如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">def code= &#123; a, b -&gt; println(a + b) &#125;</div><div class="line">def methodClosure(a,b, Closure c)&#123;</div><div class="line">    c.call(a,b)</div><div class="line">&#125;</div><div class="line">//第一种调用</div><div class="line">methodClosure(1, 2 ,code)</div><div class="line">// 第二种调用</div><div class="line">methodClosure(1, 2 ,&#123; a, b -&gt; println(a + b) &#125;)</div><div class="line">// 第三种调用</div><div class="line">methodClosure(1,2) &#123;</div><div class="line">    a, b -&gt;</div><div class="line">    println(a + b)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">2345</div><div class="line">3</div><div class="line">3</div><div class="line">3</div></pre></td></tr></table></figure></p>
<h2 id="Groovy-学习推荐"><a href="#Groovy-学习推荐" class="headerlink" title="Groovy 学习推荐"></a>Groovy 学习推荐</h2><p><a href="http://groovy-lang.org/documentation.html" target="_blank" rel="external"> Documentation</a><br><a href="http://blog.csdn.net/yanbober/article/details/49047515" target="_blank" rel="external">Groovy脚本基础全攻略</a><br><a href="http://blog.csdn.net/kmyhy/article/details/4200563" target="_blank" rel="external"> Groovy入门教程</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Groovy语言/" rel="tag">#Groovy语言</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/16/gradle/androidGraleFirst/" rel="next" title="Android Gradle使用基础">
                <i class="fa fa-chevron-left"></i> Android Gradle使用基础
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/28/gradle/gradleskill/" rel="prev" title="Gradle的使用技巧">
                Gradle的使用技巧 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/images/avatar.jpg"
               alt="rabbit" />
          <p class="site-author-name" itemprop="name">rabbit</p>
          <p class="site-description motion-element" itemprop="description">Android</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Groovy-语言学习"><span class="nav-number">1.</span> <span class="nav-text">Groovy 语言学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Groovy安装"><span class="nav-number">1.1.</span> <span class="nav-text">Groovy安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Groovy基本规则"><span class="nav-number">1.2.</span> <span class="nav-text">Groovy基本规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Groovy语法基础"><span class="nav-number">1.3.</span> <span class="nav-text">Groovy语法基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HelloGroovy程序："><span class="nav-number">1.3.1.</span> <span class="nav-text">HelloGroovy程序：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定义变量"><span class="nav-number">1.3.2.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型兼容问题"><span class="nav-number">1.3.3.</span> <span class="nav-text">类型兼容问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Groovy的字符串GString"><span class="nav-number">1.3.4.</span> <span class="nav-text">Groovy的字符串GString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Groovy的运算符"><span class="nav-number">1.3.5.</span> <span class="nav-text">Groovy的运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Groovy-导入别的类"><span class="nav-number">1.3.6.</span> <span class="nav-text">Groovy 导入别的类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环"><span class="nav-number">1.3.7.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#switch-case结构"><span class="nav-number">1.3.7.1.</span> <span class="nav-text">switch/case结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环"><span class="nav-number">1.3.7.2.</span> <span class="nav-text">for循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据结构"><span class="nav-number">1.3.8.</span> <span class="nav-text">数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#List"><span class="nav-number">1.3.8.1.</span> <span class="nav-text">List</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Map"><span class="nav-number">1.3.8.2.</span> <span class="nav-text">Map</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组"><span class="nav-number">1.3.8.3.</span> <span class="nav-text">数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Groovy封装定义"><span class="nav-number">1.4.</span> <span class="nav-text">Groovy封装定义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义类"><span class="nav-number">1.4.1.</span> <span class="nav-text">定义类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定义方法"><span class="nav-number">1.4.2.</span> <span class="nav-text">定义方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定义属性"><span class="nav-number">1.4.3.</span> <span class="nav-text">定义属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#闭包"><span class="nav-number">1.5.</span> <span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Groovy-学习推荐"><span class="nav-number">1.6.</span> <span class="nav-text">Groovy 学习推荐</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rabbit</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
